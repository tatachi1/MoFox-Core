# 记忆系统维护与未来规划（Memory Graph）

> 状态：转为可选插件；核心仓库仅修复 BUG，不再做功能迭代。
> 日期：2025-12-21

## 简介（简版）
- 作用：为对话提供可持续的知识与关系网络，支持长期回忆与语义检索。
- 结构：图模型（节点-边）结合语义向量；既能存事实/事件，也能表达因果与引用关系。
- 流程：消息经感知→短期→长期分层管理，后台批量去重与整理，降低对话主路径开销。
- 检索：向量初筛 + 图遍历扩展，支持按时间、类型过滤与多跳关联召回。
- 集成：提供 LLM 工具调用；与统一调度器协作执行整理/衰减等后台任务。
- 状态：当前以“插件”形态供按需启用；核心仓保持接口兼容，仅进行缺陷与安全修复。

## 为什么调整
为保证核心架构稳定与可维护性，记忆系统（Memory Graph）将从核心内置模块调整为“插件”形态，供用户按需启用。这样可以：
- 降低核心的复杂度与耦合度
- 更清晰的发布节奏与责任边界
- 允许不同用户自主选择是否启用记忆能力

## 维护策略
- 维护级别：仅修复 BUG 与安全问题（Security Fixes）。
- 不再进行：功能扩展、接口变更、架构重构。
- 兼容性承诺：保持当前 API 与数据结构的向后兼容；如遇到阻断性问题，将提供迁移说明。

## 使用与迁移
- 新项目：推荐通过插件系统启用记忆功能（插件将单独发布）。
- 现有项目：继续可用；当插件版本发布后，建议按迁移指引切换到插件方案。
- 插件开发与启用参考：`docs/plugins/quick-start.md` 与在线文档：https://mofox-studio.github.io/MoFox-Bot-Docs/

## 开发说明（新增）
本目录提供一份维护性开发指南，面向“仅修复 BUG 与安全问题”的更新场景：
- 开发指南：见 [DEVELOPER_GUIDE.md](DEVELOPER_GUIDE.md)
- 重点约束：
	- 数据库访问走 API 层（CRUDBase/QueryBuilder），批量操作用 AdaptiveBatchScheduler；避免直接 `Session` 与逐条写入。
	- 异步优先：避免阻塞主流程；后台任务建议通过统一调度器（TIME/事件）触发。
	- 兼容性与日志：不改变公共 API 行为语义；为修复点添加结构化日志与指标采集。
	- 测试与质量：为修复补充最小测试；使用 Ruff 检查与格式化。

## 常见问题（FAQ）
- 是否会移除现有代码？不会。现有实现保留并进入“仅修复 BUG”维护模式。
- 数据是否需要迁移？短期无需；当插件版发布且有结构变更时，会提供迁移指引。
- 如何启用插件版？待插件发布后，在 `plugins/` 目录安装并在配置中启用，具体步骤见插件文档。

## 沟通与问题反馈
- 发现缺陷：请通过 Issue 提交最小复现与日志片段。
- 需求建议：欢迎在插件版发布后反馈，但核心仓库不再接受对此模块的功能迭代请求。

---
本说明用于标记维护状态与未来规划，帮助用户明确选择与升级路径。